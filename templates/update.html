<html>
<head>
	<title>Welcome, {{user.firstName}}</title>
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}?q={{ time }}" />

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- Compiled and minified CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
		integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

	<!-- Compiled and minified JavaScript -->
	<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
		integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
	</script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
		integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
	</script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
		integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
	</script>
</head>

<body onload="changeComboBox({{user.deposits}}); showCurVal({{user.deposits}}, {{user.withdrawls}})">
<!--Navbar -->
<nav class="mb-1 navbar navbar-expand-lg navbar-dark bg-primary">
  <a class="navbar-brand" href="#">TECK</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent-333"
    aria-controls="navbarSupportedContent-333" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarSupportedContent-333">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="/dashboard">Dashboard
          <span class="sr-only">(current)</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Something</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Something2</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-333" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">Make Changes
        </a>
        <div class="dropdown-menu dropdown-default" aria-labelledby="navbarDropdownMenuLink-333">
          <a class="dropdown-item" href="/update">Update Form</a>
          <a class="dropdown-item" href="/new_entry">Deposits/Withdrawls</a>
        </div>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto nav-flex-icons">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-333" data-toggle="dropdown"
          aria-haspopup="true" aria-expanded="false">
          <i class="fas fa-user"></i>
        </a>
        <div class="dropdown-menu dropdown-menu-right dropdown-default"
          aria-labelledby="navbarDropdownMenuLink-333">
          <a class="dropdown-item" href="#">My Preferences</a>
          <hr>
          <a class="dropdown-item" href="/logout">Logout</a>
        </div>
      </li>
    </ul>
  </div>
</nav>
<!--/.Navbar -->
	<h3>UPDATE FORM</h3>


<form name="feedback" action="/update" method="post">

  <label>
    <input type="radio" id="deposit" name="yesOrNo" value="deposit" onchange="displayQuestion(this.value)" />Deposit</label>
  <label>
    <input type="radio" id="withdrawl" name="yesOrNo" value="withdrawl" onchange="displayQuestion(this.value)" />Withdrawl</label>
</form>

  <div id="depositQuestion" style="display:none;"><br/>
  <form method="post" action="/update">
		<label for="category">Choose a category whose value to replace:</label>
<<<<<<< HEAD

        <input type="radio" id="deposits" name="category" value="deposits" checked onchange="changeComboBox({{user.deposits}}); showCurVal({{user.deposits}}, {{user.withdrawls}})">
        <label for="deposits">Deposit</label>

        <input type="radio" id="withdrawls" name="category" value="withdrawls" onchange="changeComboBox({{user.withdrawls}}); showCurVal({{user.deposits}}, {{user.withdrawls}})">
        <label for="withdrawls">Withdrawl</label><br>

		<select id="category" name="details" onchange="showCurVal({{user.deposits}}, {{user.withdrawls}})">
            <!--{% for deposit in user.deposits %}
                <option value="{{deposit}}">{{deposit}}</option>
            {% endfor %}
            {% for withdrawl in user.withdrawls %}
                <option value="{{withdrawl}}">{{withdrawl}}</option>
            {% endfor %}-->
        </select>

		<input type="text" id="newval" name="newval"><br>
=======
		<select name="category">
                {% for deposit in user.deposits %}
                    <option value="{{deposit}}">{{deposit}}</option>
                {% endfor %}
        </select>
        $<input type="text" name="newval"></input><br>
		<input type="submit" value="Update">
    </form>
  </div>

  <div id="withdrawlQuestion" style="display:none;"><br/>
    <form method="post" action="/update">
		<label for="category">Choose a category whose value to replace:</label>
		<select name="category">
                {% for withdrawl in user.withdrawls %}
                    <option value="{{withdrawl}}">{{withdrawl}}</option>
                {% endfor %}
        </select>
        $<input type="text" name="newval"></input><br>
>>>>>>> ab28b883915d2b0d025a556ba50e75f038748426
		<input type="submit" value="Update">
    </form>
  </div>

    <script>
        function changeComboBox(stuffToShow)
        {
            var comboBox = document.getElementById("category");

<<<<<<< HEAD
            var length = comboBox.options.length;
            for (i = length-1; i >= 0; i--)
                comboBox.options[i] = null;
=======
    <script>
        function displayQuestion(answer) {
            document.getElementById(answer + 'Question').style.display = "block";
            if (answer == "deposit") { // hide the div that is not selected
                document.getElementById('withdrawlQuestion').style.display = "none";
            } else if (answer == "withdrawl") {
                document.getElementById('depositQuestion').style.display = "none";
            }
            }
    </script>
</body>
>>>>>>> ab28b883915d2b0d025a556ba50e75f038748426

            for (var key in stuffToShow) {
                var el = document.createElement("option");
                el.textContent = key;
                el.value = key;
                comboBox.appendChild(el);
            }
        }
        function showCurVal(deposits, withdrawls)
        {
            var formatter = new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
            });

            var cat = document.getElementById("category");
            var catSelected = cat.options[cat.selectedIndex].text;

            if (catSelected in deposits)
                document.getElementById("newval").value = formatter.format(deposits[catSelected]);
            else
                document.getElementById("newval").value = formatter.format(withdrawls[catSelected]);
        }
    </script>

</body>
</html>